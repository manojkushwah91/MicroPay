server:
  port: 8888

spring:
  application:
    name: config-server
  profiles:
    active: native
  cloud:
    config:
      # CRITICAL FIX: Disables the client from trying to fetch config from port 8888.
      # This stops the infinite loop causing the Read timed out error.
      enabled: false 
      server:
        native:
          # Refined for both local IDE runs and Docker container runs
          search-locations: file:./config-repo,file:/config-repo,classpath:/config-repo
        health:
          # We kept the health section enabled but simplified it to avoid I/O hangs
          enabled: true
          # Note: Explicit service labels are removed here because 'native' profile
          # does not have git-style labels like 'master'. Removing them prevents 
          # unnecessary lookup overhead that leads to timeouts.

management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      # Setting to 'always' helps you debug if the native repo folder is missing
      show-details: always
  info:
    env:
      enabled: true

info:
  app:
    name: MicroPay Config Server
    description: Centralized configuration server for MicroPay microservices
    version: 1.0.0

logging:
  level:
    root: INFO
    org.springframework.cloud.config: DEBUG
    com.micropay: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"